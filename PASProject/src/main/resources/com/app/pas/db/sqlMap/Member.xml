<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="Member">
	<typeAlias alias="str" type="java.lang.String" />
	<typeAlias alias="int" type="java.lang.Integer" />
	<typeAlias alias="Member" type="com.app.pas.dto.MemberVo" />
	<typeAlias alias ="MemApplyView" type="com.app.pas.dto.MemApplyViewVo"/>

	<select id="selectMemberList" parameterClass="str" resultClass="Member">
		select * from MEMBER where MEM_EMAIL LIKE '%'||#mem_Email#||'%'
	</select>

	<select id="selectMember" parameterClass="str" resultClass="Member">
		select * from member where mem_email = #mem_Email#
	</select>
	
	<select id="searchEmail" parameterClass="Member" resultClass="Member">
		select * from member where mem_Name =#mem_Name# and mem_Phone = #mem_Phone#
	</select>
	

	<update id="extraMemberPwd" parameterClass="Member">
		update Member set mem_pass=#mem_Pass# where mem_email=#mem_Email#

	</update>

	<update id="AuthMember" parameterClass="str">

		update Member set mem_approve='y' where mem_email = # mem_Email#
	</update>
	<update id="insertMember" parameterClass="Member">
		insert into MEMBER(MEM_EMAIL,MEM_NAME,MEM_PHONE,MEM_PASS)
		VALUES(#mem_Email#,#mem_Name#,#mem_Phone#,#mem_Pass#)
	</update>

	<update id="updateMember" parameterClass="Member">
		UPDATE MEMBER SET MEM_NAME=#mem_Name# ,MEM_PHONE=#mem_Phone#,
		MEM_PASS=#mem_Pass#,MEM_IMG=#mem_Img#
		WHERE MEM_EMAIL = #mem_Email#
	</update>

	<update id="deleteMember" parameterClass="str">
		delete from MEMBER where MEM_EMAIL=#mem_Email#
	</update>

	<select id="selectCountMemApplyView" parameterClass="MemApplyView" resultClass="int">
		select count(*) from mem_apply_view where apply_commit_check =0 and mem_Email = #mem_Email# and proj_num = #proj_Num#
	</select>
	
	<select id="selectMemApplyViewByMemProj" parameterClass="MemApplyView" resultClass="MemApplyView">
		select * from mem_apply_view where mem_email = #mem_Email# and proj_num = #proj_Num#
	</select>
	
	<select id="selectMemApplyViewByEmail" parameterClass="str" resultClass="MemApplyView">
		select * from mem_Apply_View where p_mem_Email = #p_Mem_Email# and apply_commit_check = '0' order by apply_num desc
	</select>
	
	
	<select id="selectMemApplyViewByApplyNum" parameterClass="int" resultClass="MemApplyView">
		select * from mem_Apply_view where apply_Num = #apply_Num#
	</select>
	
	<update id="updateApplyCommitCheck" parameterClass="int">
		update mem_apply_view set apply_commit_check='1' where apply_Num = #apply_Num#
	</update>
	
	<update id="deleteApplyViewByApplyNum" parameterClass="int">
		delete mem_apply_view where apply_Num = #apply_Num#
	</update>
	
	
	<update id="updateMemberImg" parameterClass="Member">
		UPDATE MEMBER SET
		MEM_IMG=#mem_Img# WHERE MEM_EMAIL = #mem_Email#
	</update>
	
	
</sqlMap>
